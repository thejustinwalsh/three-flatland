---
title: TSL Nodes
description: Create custom shader effects using Three Shader Language nodes.
---

import { Tabs, TabItem } from '@astrojs/starlight/components';
import ExamplePreview from '../../../components/ExamplePreview';
import StackBlitzEmbed from '../../../components/StackBlitzEmbed';
import ExampleTabs from '../../../components/ExampleTabs.astro';
import { loadExample } from '../../../utils/loadExample';

export const vanillaFiles = loadExample('vanilla', 'tsl-nodes');
export const reactFiles = loadExample('react', 'tsl-nodes');

<ExampleTabs>
<Tabs>
  <TabItem label="Preview" icon="rocket">
    <ExamplePreview client:load type="vanilla" name="tsl-nodes" />
  </TabItem>
  <TabItem label="Three.js" icon="seti:javascript">
    <StackBlitzEmbed
      client:load
      title="TSL Nodes - Three.js"
      files={vanillaFiles}
      openFile="main.ts"
      height={600}
    />
  </TabItem>
  <TabItem label="React" icon="seti:react">
    <StackBlitzEmbed
      client:load
      title="TSL Nodes - React"
      files={reactFiles}
      openFile="App.tsx"
      height={600}
    />
  </TabItem>
</Tabs>
</ExampleTabs>

## Effect Showcase

This example demonstrates several sprite effects using TSL nodes. Press keys 1-8 or click buttons to switch:

| Key | Effect | Description |
|-----|--------|-------------|
| 1 | Normal | No effect |
| 2 | Damage Flash | White additive flash that decays |
| 3 | Dissolve | Pixelated dissolve using noise texture |
| 4 | Power-Up | Animated rainbow hue shift |
| 5 | Petrify | Grayscale (desaturate to 0) |
| 6 | Selection | Green outline using 8-direction sampling |
| 7 | Shadow | Dark blue tint with reduced alpha |
| 8 | Pixelate | Teleport effect (pixelate in/out) |

## Applying Effects

Use TSL nodes from `@three-flatland/core`:

```typescript
import { MeshBasicNodeMaterial } from 'three/webgpu';
import { Fn } from 'three/tsl';
import {
  sampleSprite,
  tint,
  tintAdditive,
  hueShift,
  saturate,
  outline8,
  pixelate,
  dissolvePixelated,
} from '@three-flatland/core';

const material = new MeshBasicNodeMaterial();
material.transparent = true;

// Example: Damage flash effect
material.colorNode = Fn(() => {
  const color = sampleSprite(texture, frameUniform, { alphaTest: 0.01 });
  return tintAdditive(color, [1, 1, 1], flashIntensity);
})();
```

## Available Nodes

| Node | Description |
|------|-------------|
| `tint` | Multiplicative color tint |
| `tintAdditive` | Additive flash effect |
| `hueShift` | Rotate hue (rainbow effect) |
| `saturate` | Adjust color saturation |
| `grayscale` | Convert to grayscale |
| `outline8` | 8-direction outline |
| `pixelate` | Reduce resolution |
| `dissolvePixelated` | Noise-based dissolve |

## Custom Effects

Combine nodes with Three.js TSL for custom effects:

```typescript
import { Fn, vec4, float } from 'three/tsl';
import { sampleSprite, tint, tintAdditive } from '@three-flatland/core';

// Shadow form: dark blue tint with transparency
material.colorNode = Fn(() => {
  const color = sampleSprite(texture, frameUniform, { alphaTest: 0.01 });
  const darkened = tint(tintAdditive(color, [0, 0, 0.2], 0.3), [0.2, 0.2, 0.4]);
  return vec4(darkened.rgb, color.a.mul(float(0.6)));
})();
```

## Next Steps

- [TSL Nodes Guide](/guides/tsl-nodes) - Complete node reference
- [Post-Processing](/examples/post-processing) - Display effects
- [2D Lighting](/examples/lighting) - Dynamic sprite lighting
